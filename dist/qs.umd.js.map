{"version":3,"file":"qs.umd.js","sources":["../src/index.js"],"sourcesContent":["/*\r\n *\r\n */\r\n\r\n\r\nconst addTemplate = createTemplate()\r\n\r\nmodule.exports = function (literals, ...substitutions) {\r\n  const query = createQuery(literals, substitutions)\r\n  if (query === null) return null\r\n  if (Array.isArray(query)) {\r\n    return addTemplate(query)\r\n  } else {\r\n    const elements = Array.from(document.querySelectorAll(query))\r\n    return elements.length > 0 ? addTemplate(elements) : null\r\n  }\r\n}\r\n\r\nfunction createTemplate () {\r\n  const events = getAllEvents()\r\n  const customMethods = {\r\n    set: setFunction,\r\n    get: getFunction\r\n  }\r\n  return function (elements) {\r\n    const customProps = {}\r\n    events.forEach(event => {\r\n      addAFunction(customProps, event, eventFunction, { elements, event })\r\n    })\r\n    Object.entries(customMethods).forEach(([methodName, methodFunc]) => {\r\n      addAFunction(customProps, methodName, methodFunc, { elements })\r\n    })\r\n    return Object.defineProperties(elements, customProps)\r\n  }\r\n}\r\n\r\nfunction addAFunction (customProps, propName, propFunc, funcVars) {\r\n  customProps[propName] = {}\r\n  customProps[propName].value = propFunc(funcVars)\r\n}\r\n\r\n/*\r\n * The next functions are all non-enumerable properties given to the created qs objects\r\n */\r\nfunction eventFunction ({ elements, event }) {\r\n  return function (func) {\r\n    elements.forEach(element => {\r\n      element.addEventListener(event, (jsEvent) => {\r\n        func (jsEvent, elements)\r\n      })\r\n    })\r\n    return elements\r\n  }\r\n}\r\n\r\nfunction setFunction ({ elements }) {\r\n  return function (func) {\r\n    elements.forEach(func)\r\n    return elements\r\n  }\r\n}\r\n\r\nfunction getFunction ({ elements }) {\r\n  return function (func) {\r\n    return elements.map(element => func(element))\r\n  }\r\n}\r\n\r\n/* \r\n * Returns an array of names of all available events\r\n */\r\nfunction getAllEvents () {\r\n  return Object.getOwnPropertyNames(Object.getPrototypeOf(Object.getPrototypeOf(document))).filter(eventName =>\r\n    !eventName.indexOf('on') && (document[eventName] == null || typeof document[eventName] == 'function')\r\n  ).map(eventName => eventName.substr(2))\r\n}\r\n\r\n/*\r\n * Takes arguments from a tagged template literal\r\n * If valid HTML element array submitted as first argument, return\r\n * Else If array entered as a substitution, and no literals, return substitution array\r\n * Else If return a query string to be used with document.querySelectorAll\r\n * If not valid, return null\r\n */\r\nfunction createQuery (literals, substitutions) {\r\n  console.log('here', literals, substitutions, substitutions.length, Array.isArray(substitutions))\r\n  if (Array.isArray(literals) && literals.every(isValidElement)) {\r\n    return literals\r\n  } else if (Array.isArray(literals) && Array.isArray(substitutions)) {\r\n    if (literals.join() === '' && substitutions.every(isValidElement)) {\r\n      return substitutions\r\n    } else {\r\n      return literals.map((literal, index) => {\r\n        return (literal || '') + (substitutions[index] || '')\r\n      }).join() || null\r\n    }\r\n  } else if (typeof literals === 'string' || literals instanceof String) {\r\n    return literals\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nfunction isValidElement (element) {\r\n  return element instanceof Element || element instanceof HTMLDocument\r\n}"],"names":["events","customMethods","addTemplate","Object","getOwnPropertyNames","getPrototypeOf","document","filter","eventName","indexOf","map","substr","set","elements","func","forEach","get","element","customProps","event","addAFunction","eventFunction","entries","defineProperties","propName","propFunc","funcVars","value","addEventListener","jsEvent","createQuery","literals","substitutions","console","log","length","Array","isArray","every","isValidElement","join","literal","index","String","Element","HTMLDocument","module","exports","query","from","querySelectorAll"],"mappings":"6EAKA,IAcQA,EACAC,EAfFC,GAcEF,EAqDCG,OAAOC,oBAAoBD,OAAOE,eAAeF,OAAOE,eAAeC,YAAYC,OAAO,SAAAC,UAC9FA,EAAUC,QAAQ,QAAiC,MAAvBH,SAASE,IAAoD,mBAAvBF,SAASE,MAC5EE,IAAI,SAAAF,UAAaA,EAAUG,OAAO,KAtD9BV,EAAgB,CACpBW,IAkCJ,gBAAwBC,IAAAA,SACtB,gBAAiBC,GAEf,OADAD,EAASE,QAAQD,GACVD,IApCPG,IAwCJ,gBAAwBH,IAAAA,SACtB,gBAAiBC,GACf,OAAOD,EAASH,IAAI,SAAAO,UAAWH,EAAKG,iBAxCrBJ,GACf,IAAMK,EAAc,GAOpB,OANAlB,EAAOe,QAAQ,SAAAI,GACbC,EAAaF,EAAaC,EAAOE,EAAe,CAAER,SAAAA,EAAUM,MAAAA,MAE9DhB,OAAOmB,QAAQrB,GAAec,QAAQ,YACpCK,EAAaF,YAAqC,CAAEL,SAAAA,MAE/CV,OAAOoB,iBAAiBV,EAAUK,KAI7C,SAASE,EAAcF,EAAaM,EAAUC,EAAUC,GACtDR,EAAYM,GAAY,GACxBN,EAAYM,GAAUG,MAAQF,EAASC,GAMzC,SAASL,SAAiBR,IAAAA,SAAUM,IAAAA,MAClC,gBAAiBL,GAMf,OALAD,EAASE,QAAQ,SAAAE,GACfA,EAAQW,iBAAiBT,EAAO,SAACU,GAC/Bf,EAAMe,EAAShB,OAGZA,GAiCX,SAASiB,EAAaC,EAAUC,GAE9B,OADAC,QAAQC,IAAI,OAAQH,EAAUC,EAAeA,EAAcG,OAAQC,MAAMC,QAAQL,IAC7EI,MAAMC,QAAQN,IAAaA,EAASO,MAAMC,GACrCR,EACEK,MAAMC,QAAQN,IAAaK,MAAMC,QAAQL,GAC1B,KAApBD,EAASS,QAAiBR,EAAcM,MAAMC,GACzCP,EAEAD,EAASrB,IAAI,SAAC+B,EAASC,GAC5B,OAAQD,GAAW,KAAOT,EAAcU,IAAU,MACjDF,QAAU,KAEc,iBAAbT,GAAyBA,aAAoBY,OACtDZ,OAMX,SAASQ,EAAgBtB,GACvB,OAAOA,aAAmB2B,SAAW3B,aAAmB4B,aAjG1DC,OAAOC,QAAU,SAAUhB,GACzB,IAAMiB,EAAQlB,EAAYC,8BAC1B,GAAc,OAAViB,EAAgB,YACpB,GAAIZ,MAAMC,QAAQW,GAChB,OAAO9C,EAAY8C,GAEnB,IAAMnC,EAAWuB,MAAMa,KAAK3C,SAAS4C,iBAAiBF,IACtD,OAAOnC,EAASsB,OAAS,EAAIjC,EAAYW,GAAY"}