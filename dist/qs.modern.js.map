{"version":3,"file":"qs.modern.js","sources":["../src/index.js"],"sourcesContent":["const addTemplate = createTemplate()\r\n\r\nmodule.exports = function (literals, ...substitutions) {\r\n  const query = createQuery(literals, substitutions)\r\n  if (query === null) return null\r\n  const elements = Array.from(document.querySelectorAll(query))\r\n  return elements.length > 0 ? addTemplate(elements) : null\r\n}\r\n\r\nfunction createTemplate () {\r\n  const events = getAllEvents()\r\n  const customMethods = {\r\n    set: setFunction,\r\n    get: getFunction\r\n  }\r\n  return function (elements) {\r\n    const customProps = {}\r\n    events.forEach(event => {\r\n      addAFunction(customProps, event, eventFunction, { elements, event })\r\n    })\r\n    Object.entries(customMethods).forEach(([methodName, methodFunc]) => {\r\n      addAFunction(customProps, methodName, methodFunc, { elements })\r\n    })\r\n    return Object.defineProperties(elements, customProps)\r\n  }\r\n}\r\n\r\nfunction addAFunction (customProps, propName, propFunc, funcVars) {\r\n  customProps[propName] = {}\r\n  customProps[propName].value = propFunc(funcVars)\r\n}\r\n\r\nfunction eventFunction ({ elements, event }) {\r\n  return function (func) {\r\n    elements.forEach(element => {\r\n      element.addEventListener(event, func)\r\n    })\r\n    return elements\r\n  }\r\n}\r\n\r\nfunction setFunction ({ elements }) {\r\n  return function (func) {\r\n    elements.forEach(func)\r\n    return elements\r\n  }\r\n}\r\n\r\nfunction getFunction ({ elements }) {\r\n  return function (func) {\r\n    return elements.map(element => func(element))\r\n  }\r\n}\r\n\r\nfunction getAllEvents () {\r\n  return Object.getOwnPropertyNames(document).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(Object.getPrototypeOf(document)))).filter(eventName =>\r\n    !eventName.indexOf('on') && (document[eventName] == null || typeof document[eventName] == 'function')\r\n  ).map(eventName => eventName.substr(2))\r\n}\r\n\r\nfunction createQuery (literals, substitutions) {\r\n  if (Array.isArray(literals) && Array.isArray(substitutions)) {\r\n    return literals.map((literal, index) => {\r\n      return (literal || '') + (substitutions[index] || '')\r\n    }).join() || null\r\n  } else if (typeof literals === 'string' || literals instanceof String) {\r\n    return literals\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n"],"names":["addTemplate","events","Object","getOwnPropertyNames","document","concat","getPrototypeOf","filter","eventName","indexOf","map","substr","customMethods","set","setFunction","get","getFunction","elements","customProps","forEach","event","addAFunction","eventFunction","entries","methodName","methodFunc","defineProperties","createTemplate","propName","propFunc","funcVars","value","func","element","addEventListener","module","exports","literals","substitutions","query","Array","isArray","literal","index","join","String","createQuery","from","querySelectorAll","length"],"mappings":"AAAA,MAAMA,EASN,WACE,MAAMC,EA6CCC,OAAOC,oBAAoBC,UAAUC,OAAOH,OAAOC,oBAAoBD,OAAOI,eAAeJ,OAAOI,eAAeF,aAAaG,OAAOC,IAC3IA,EAAUC,QAAQ,QAAiC,MAAvBL,SAASI,IAAoD,mBAAvBJ,SAASI,KAC5EE,IAAIF,GAAaA,EAAUG,OAAO,IA9C9BC,EAAgB,CACpBC,IAAKC,EACLC,IAAKC,GAEP,gBAAiBC,GACf,MAAMC,EAAc,GAOpB,OANAjB,EAAOkB,QAAQC,IACbC,EAAaH,EAAaE,EAAOE,EAAe,CAAEL,SAAAA,EAAUG,MAAAA,MAE9DlB,OAAOqB,QAAQX,GAAeO,QAAQ,EAAEK,EAAYC,MAClDJ,EAAaH,EAAaM,EAAYC,EAAY,CAAER,SAAAA,MAE/Cf,OAAOwB,iBAAiBT,EAAUC,IAvBzBS,GA2BpB,SAASN,EAAcH,EAAaU,EAAUC,EAAUC,GACtDZ,EAAYU,GAAY,GACxBV,EAAYU,GAAUG,MAAQF,EAASC,GAGzC,SAASR,GAAeL,SAAEA,EAAFG,MAAYA,IAClC,gBAAiBY,GAIf,OAHAf,EAASE,QAAQc,IACfA,EAAQC,iBAAiBd,EAAOY,KAE3Bf,GAIX,SAASH,GAAaG,SAAEA,IACtB,gBAAiBe,GAEf,OADAf,EAASE,QAAQa,GACVf,GAIX,SAASD,GAAaC,SAAEA,IACtB,gBAAiBe,GACf,OAAOf,EAASP,IAAIuB,GAAWD,EAAKC,KAhDxCE,OAAOC,QAAU,SAAUC,KAAaC,GACtC,MAAMC,EAyDR,SAAsBF,EAAUC,GAC9B,OAAIE,MAAMC,QAAQJ,IAAaG,MAAMC,QAAQH,GACpCD,EAAS3B,IAAI,CAACgC,EAASC,KACpBD,GAAW,KAAOJ,EAAcK,IAAU,KACjDC,QAAU,KACgB,iBAAbP,GAAyBA,aAAoBQ,OACtDR,OA/DKS,CAAYT,EAAUC,GACpC,GAAc,OAAVC,EAAgB,YACpB,MAAMtB,EAAWuB,MAAMO,KAAK3C,SAAS4C,iBAAiBT,IACtD,OAAOtB,EAASgC,OAAS,EAAIjD,EAAYiB,GAAY"}